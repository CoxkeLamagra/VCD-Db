$Id$

VCD-db README ($Date$)


INSTALLATION

1)  Unzip the VCD-db file on your webserver. 
2)  You must have a database access. 
3)  Create an empty database.
	At the moment the following databases are supported 
	a) MySQL (3.x/4.x/5.x) 
	b) Microsoft SQL (7, 2000 and 2005) 
	c) Postgre SQL 7.4, 7.5, 8, 8.1 (Even without OID's enabled)
	d) IBM DB2 (7.2 and up) 
	e) SQLite
4)  If your webserver is on a Win32 box this step is unneccassary,
	otherwise if your webserver is on a Unix/Linux box, you must have an Shell Access 
	or a ftp access to chmod some files and folders. Open up a console session to your box and
	go to the directory where you extracted the VCD-DB zip file.
	Enter the following commands: 
	
	touch config.php
	chmod 666 config.php
	chmod 0777 upload
	chmod 0777 upload/cache
	chmod 0777 upload/covers
	chmod 0777 upload/nfo
	chmod 0777 upload/pornstars
	chmod 0777 upload/screenshots/albums
	chmod 0777 upload/screenshots/generated
	chmod 0777 upload/thumbnails

5)  After a successfull install, delete the setup folder and 
    if you are running VCD-db on a linux box chmod the file config.php back to 644
    to prevent any further writing or modification to the file.


UPGRADING

Upgrading from 0.983
	1) Extract all the files from the zip/tar archive and overwrite your existing VCD-db installation
	2) First, the file classes/VCDConstants.php is no longer used, but dont delete it yet.
	   Goto the vcddb/setup directory and copy the file config.default to your vcddb root directory
	   and rename it to config.php.  Then enter the same database settings in the new config file that 
	   you had in your file classes/VCDConstants.php, you can also update other settings you might have modified
	   such as proxy server setttings and LDAP directory settings.  Now you can delete the file classes/VCDConstants.php
	3) There are 4 changes that need to be done on your database.
		A) Change the size of the field metadata_value in the table vcd_Metadata to VARCHAR(250).
		   If using MySQL you can use the following query to modify the table for you in your query tool..
		   ALTER TABLE `vcd_MetaData` CHANGE `metadata_value` `metadata_value` VARCHAR( 250 ) NOT NULL 
		B) 2 New columns need to be added to the table vcd_RssFeeds after the column "feed_url", they are ..
			isAdult, tinyint(4) and isSite, tinyint(4) both which allow NULL values.
			If using MySQL you can use the following query to modify the table for you in your query tool..
			ALTER TABLE `vcd_RssFeeds` ADD `isAdult` TINYINT NULL DEFAULT '0', ADD `isSite` TINYINT NULL DEFAULT '0';
		C) New role needs to be created in VCD-db, to do that you must add the following entry to your vcd_UserRoles table
		   User = "Adult User", Description = "User with Adult options enabled"
		   Use this SQL query to insert the data => 
		   INSERT INTO `vcd_UserRoles`(`role_name` , `role_description` ) VALUES ('Adult User', 'User with Adult options enabled');
		D) Finally we need to update one entry in the vcd_MetaDataTypes table, you can do that with the 
		   following SQL query on the table vcd_MetaDataTypes ..
		   UPDATE `vcd_MetaDataTypes` SET `type_name` = 'defaultdvd', `type_description` = 'Default DVD Settings' WHERE type_id =20
	  4) Thats it .. you can now enjoy your updated VCD-db :), ps. sorry for being lazy and not writing an update script :)
	  5) If you want to do some cleaning up .. you can delete the folder classes/languages.  The new language system
	  	 uses XML files stored in /includes/languages/

		   
		   
Upgrading from 0.982
	1) Back up your existing settings file (classes/VCDConstants.php)
	2) Extract all the files from the zip/tar archive and overwrite your existing VCD-db installation
	3) Edit the file "classes/VCDConstants.php" and update your database settings.  (You can take a look at the backed up file as a reference.)
	4) Upgrade is complete .. Delete the /vcddb/setup folder and you are good to go.

Upgrading from 0.98 or from 0.981
	1) Back up your existing settings file (classes/VCDConstants.php)
	2) Extract all the files from the zip/tar archive and overwrite your existing VCD-db installation
	3) Two new columns in table vcd_SourceSites need to be created.
	   Create them after the site_isFetchable column.
		   a) create column "site_classname", varchar(20), null=yes, default=null
	   	   b) create column "site_image", varchar(50), null=yes, default=null
	   	   	(If you are using mysql you can use the SQL statement below to make things easier) (copy the text without quotes)
	   	   	"ALTER TABLE vcd_SourceSites ADD site_classname VARCHAR(20) NULL AFTER site_isFetchable;
	   	   	 ALTER TABLE vcd_SourceSites ADD site_image VARCHAR(50) NULL AFTER site_classname;"
	4) Edit the file "classes/VCDConstants.php" and update your database settings.  (You can take a look at the backed up file as a reference.)
	5) Open browser and goto your VCD-db site/setup and select upgrade. (host/vcddb/setup)
	6) When the upgrade process has reported success, delete the /setup folder.
	7) Congrats, you have just finished updating VCD-db :)

   
UPGRADING FROM OLDER VERSIONS
  	You will have to d/l an older release such as VCD-db 0.98 from sf.net/projects/vcddb and
  	upgrade from that version.  Then after that, upgrade again with latest version.
  	Since VCD-db is still in beta stage, I'm not providing upgrade support for very old releases.


  
INSTALLATION NOTES
For the 99.9% of users, USE THE INSTALLER, use/read the following only if your are
having troubles using the installer.
Some people have reported problems when installing VCD-db on MySQL .. 
The exact problem has not been foundm, but just in case the installer is not working for you
there is a SQL script file for MySQL for creating the tables under "/setup/vcd_mysql.sql", but
If you execute the SQL file instead of using the supplied installer you will need to
manually update the file "classes/VCDConstants.php" with the correct DB parameters.
The script created the user admin with the same password.
   
APPLICATION NOTES
1) You can change the template that VCD-db uses by modifying the "STYLE" constant in the VCDConstants.php
   file, for example try changing it to "includes/templates/exprm/" for a new look.

2) All major settings are stored in the "config.php" file.

3) If your text gets escaped in the database (like this-> "Mary\'s") then edit your php.ini and set
  "magic_quotes_gpc = Off" and "magic_quotes_runtime = Off" to disable them.
  
4) You can access the XML RSS feed generated by VCD-db under the "yourserver.com/vcddb/rss/" path.

5) If you have made your own templates or translation, please send them to me (konni the author) and I will
   include it in future releases.  You can also translate online at http://vcddb.konni.com/translator
   
6) The VCD-db GUI client does not work with VCD-db installed on IIS servers at the moment, 
   this will be fixed in the future.

7) To use LDAP authentication instead of the internal DB authentication system, you must
   edit the file 'classes/VCDConstants.php' and set the appropriate values to match your
   Directory Server configuration.

8) When LDAP is used for authentication (defined in the config.php) users can not register,
   All they have to do is login with their LDAP account and then the account in automatically created for them.




ACKNOWLEDGEMENTS
----------------
VCD-db uses the following code/code fragments
 - ADOdb > Database Abstraction Library (BSD Licensed)
 - Ajason > Ajax Library (GNU Licensed)
 - Snoopy > HTTP Class (GNU Licensed)
 - NuSOAP > Web Services Toolkit for PHP (GNU Licensed)
 - Image_Toolbox > PHP image manipulation class (GNU Licensed)
 - PowerGraphic > Graph Builder (No Licenese - Freeaware)
